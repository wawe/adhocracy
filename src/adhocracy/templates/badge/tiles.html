<%!
from adhocracy.lib.helpers.badge_helper import generate_thumbnail_tag 
%>
<%def name="badge(badge)">
<%
# dummy badge
if badge == 'dummy':
   spanclass = 'abadge badge_dummy'
   aclass    = ''
   atitle    = 'badge'
   acontent  = 'badge'

else:
    # invisible badge
   if not badge.visible:
      return ''

   # thumbnail badge
   if badge.type =="thumbnail":
      spanclass = "thumbnailbadge badge_%s" % badge.id
      aclass    = 'ttip'
      atitle    = '%s - %s' % (badge.title, badge.description)
      acontent  = generate_thumbnail_tag(badge)

   # common badge
   else:
       spanclass = "abadge badge_%s" % badge.id
       aclass    = badge.description.strip() and 'ttip' or ''
       atitle    = badge.description
       acontent  = badge.title
%>
<span class="${spanclass}">
    <a class="${aclass}" title="${atitle}">${(badge == 'dummy' or badge.type =="thumbnail") and h.literal(acontent) or acontent}</a>
</span>
</%def>

<%def name="badges(badges)">
    %for badge_ in badges:
        ${badge(badge_)}
    %endfor
</%def>

<%def name="badge_styles(badges)">
<style type="text/css" media="screen">
    %for badge_ in badges:
    .badge_${badge_.id}.abadge:before { color: ${badge_.color}; }
    %endfor
</style>

</%def>

